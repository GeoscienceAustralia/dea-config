plugin: woody_cover # this can help system find the relative plugin and plugin version
plugin_config:
  input_bands: [nbart_blue, nbart_green, nbart_red, nbart_nir, nbart_swir_1, nbart_swir_2, classes_l3_l4]
  mask_bands: 
    classes_l3_l4: 110
  model_path: woody_treelite.so
  output_classes:
    woody: 113
    herbaceous: 114
  chunks:
    y: 400 
    x: 400 

product:
  name: ga_ls_woody_cover_cyear_3
  short_name: ga_ls_woody_cover_cyear_3
  version: 0.0.1
  product_family: lccs

  # -- EO Dataset3 relative section --
  naming_conventions_values: dea_c3
  explorer_path: https://explorer.dea.ga.gov.au/
  classifier: ard
  maturity: final
  collection_number: 3

  inherit_skip_properties:
    - eo:cloud_cover
    - fmask:clear
    - fmask:snow
    - fmask:cloud
    - fmask:water
    - fmask:cloud_shadow
    - eo:sun_elevation
    - eo:sun_azimuth
    - gqa:iterative_stddev_x
    - gqa:iterative_stddev_y
    - gqa:iterative_stddev_xy
    - gqa:stddev_xy
    - gqa:stddev_x
    - gqa:stddev_y
    - gqa:mean_xy
    - gqa:mean_x
    - gqa:mean_y
    - gqa:abs_xy
    - gqa:abs_x
    - gqa:abs_y
    - gqa:abs_iterative_mean_y
    - gqa:abs_iterative_mean_x
    - gqa:abs_iterative_mean_xy
    - gqa:iterative_mean_xy
    - gqa:iterative_mean_x
    - gqa:iterative_mean_y
    - gqa:cep90
    - landsat:landsat_product_id
    - landsat:landsat_scene_id
    - landsat:collection_category
    - landsat:collection_number
    - landsat:wrs_path
    - landsat:wrs_row

      # preview_image_ows_style:
      #   name: fc_rgb
      #   title: Three-band fractional cover
      #   abstract: Fractional cover medians - red is bare soil, green is green vegetation and
      #     blue is non-green vegetation
      #   components:
      #     red:
      #       bs_pc_50: 1
      #     green:
      #       pv_pc_50: 1
      #     blue:
      #       npv_pc_50: 1
      #   scale_range:
      #   - 0
      #   - 100

aws_unsigned: True

max_processing_time: 1200
job_queue_max_lease: 300
renew_safety_margin: 60
future_poll_interval: 2
# Generic product attributes
cog_opts:
  zlevel: 9
apply_eodatasets3: True
output_location: >-
  s3://dea-public-data-dev/test/lccs/ga_ls_woody_cover_cyear_3/0-0-1-rc1

# save-tasks options
input_products: ga_ls5t_gm_cyear_3-ga_ls7e_gm_cyear_3-ga_ls8cls9c_gm_cyear_3-s3://dea-public-data-dev/test/lccs/ga_ls_staging_l3_l4_cyear_3/0-0-2/
frequency: annual
grid: au_extended_30
